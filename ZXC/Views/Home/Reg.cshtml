@model ZXC.Models.EEE_cLASS

@{
    Layout = null;

    string result = "";
    Array userData = null;
    char[] delimiterChar = { ',' };

    var dataFile = Server.MapPath("~/Information/UserData.txt");

    if (File.Exists(dataFile))
    {
        userData = File.ReadAllLines(dataFile);
        if (userData == null)
        {
            result = "The file is empty.";
        }
    }
    else
    {
        result = "The file does not exist.";
    }
    result = "";

}
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Reg</title>
    <link href="~/Content/styleE.min.css" rel="stylesheet" />

</head>
<body>
    <div id="page">
        <div id="preloader"></div>

        <div id="primary" class="content-area">


            <div id="primary-background">

                <div class="layer" data-depth="1.00"></div>

            </div>


            <div class="wrap">


                <header class="site-header">

                    <nav class="navigation">

                        <ul class="menu menu-social">
                        </ul>


                    </nav>


                </header>

                <main id="main" class="site-main">

                    <div class="container">

                        <div class="site-branding m-b-16">



                        </div>


                        <article class="main-content">

                            <header class="entry-header p-b-0 m-b-12">
                                <h1 class="entry-title">Авторизация</h1>
                            </header>


                            <div class="entry-content">
                                <div class="Container group-inline2">
                                    <div class="form">
                                        <div class="navbar">
                                            <a data-toggle=".login" class="active">Вход</a>
                                            <a data-toggle=".register">Регистрация</a>
                                            <a data-toggle=".mail">Пароль?</a>
                                        </div>
                                        <div class="regBlock">
                                            <div class="login">
                                                <form method="post" autocomplete="off">
                                                    <input placeholder="Логин" name="login" type="text" pattern="[A-z0-9.]{2,50}" minlength="2" maxlength="50" autofocus="" class="form-control form-primary" required>
                                                    <input placeholder="Пароль" name="password" type="password" value="" class="form-control form-primary" required minlength="3" maxlength="50">
                                                    <br>

                                                    <br>
                                                    <input type="submit" class="btn btn-primary" value="Войти">
                                                </form>
                                                @{
                                                    bool entrance = false;

                                                    if (IsPost)
                                                    {
                                                        foreach (string dataLine in userData)
                                                        {
                                                            string[] dataItem = dataLine.Split(delimiterChar);
                                                            if (Request["login"] == dataItem[0] && Request["password"] == dataItem[1])
                                                            {
                                                                entrance = true;
                                                            }

                                                        }
                                                        if (entrance)
                                                        {
                                                            <p>Result: Вход произведен</p>
                                                            <p class="btn btn-primary">@Html.ActionLink("Нажмите для перехода дальше", "Index")</p>

                                                        }
                                                    }
                                                }
                                            </div>
                                            <div class="register d-none">
                                                В логине и(или) пароле запрещенно использовать различные символы, только буквы латинского алфавита и цифры.
                                                <form method="post" action="/Server/Post" autocomplete="off" >
                                                    @Html.TextBoxFor(x => x.login, new {@class = "form-control form-primary",placeholder="Логин" })
                                                    @Html.TextBoxFor(x => x.email, new {@class = "form-control form-primary",placeholder="Почта" })
                                                    @Html.TextBoxFor(x => x.password, new {@class = "form-control form-primary",placeholder="Пароль" })
                                                    @Html.TextBoxFor(x => x.password1, new {@class = "form-control form-primary",placeholder="Повторите пароль" })
                                                    @Html.TextBoxFor(x => x.secret_word, new {@class = "form-control form-primary",placeholder="Секретный Ворд" })

                                                    <br>

                                                    <br>
                                                    <input type="submit" class="btn btn-primary" value="Зарегистрироваться">
                                                </form>
                                            </div>
                                            <div class="mail d-none">
                                                Введите Логин и Почту которую вы вводили при регистрации
                                                <form method="post" autocomplete="off">
                                                    <input placeholder="Логин" name="login" type="text"   pattern="[A-z0-9]{2,50}" minlength="2" maxlength="50" class="form-control form-primary" required>
                                                    <input placeholder="Почта" name="email" type="text"  minlength="5" maxlength="50" class="form-control form-primary" required>
                                                    <input placeholder="Секретное слово" name="secret_word" type="text" value="" required minlength="3" maxlength="50" class="form-control form-primary">
                                                    <br>
                                                    <br>
                                                    <input type="submit" class="btn btn-primary" value="Восстановить">
                                                </form>
                                                @{
                                                    bool entrance1 = false;

                                                    if (IsPost)
                                                    {
                                                        foreach (string dataLine in userData)
                                                        {
                                                            string[] dataItem = dataLine.Split(delimiterChar);
                                                            if (Request["login"] == dataItem[0] && Request["email"] == dataItem[2] && Request["secret_word"] == dataItem[3])
                                                            {
                                                                entrance1 = true;
                                                                result = dataItem[1];

                                                            }

                                                        }
                                                        if (entrance1)
                                                        {
                                                            <p>Result: Восстановленно</p>
                                                            <p>Ваш пароль:@result</p>

                                                        }
                                                        else
                                                        {

                                                            <p>Result: Такого нет</p>
                                                        }
                                                    }
                                                }
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>


                        </article>

                    </div>

                </main>

                <footer class="site-footer">
                </footer>
            </div>
        </div>
        <aside id="about" class="sidebar sidebar-left">

            <div class="wrap">

                <div class="sidebar-control">

                </div>

                <div class="container">

                </div>
            </div>
        </aside>

        <aside id="contact" class="sidebar sidebar-right">

            <div class="wrap">
                <div class="container">

                </div>

                <footer class="entry-footer">
                </footer>

            </div>
        </aside>
    </div>

    

    <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

        <div class="pswp__bg"></div>

        <div class="pswp__scroll-wrap">

            <div class="pswp__container">
                <div class="pswp__item"></div>
                <div class="pswp__item"></div>
                <div class="pswp__item"></div>
            </div>

            <div class="pswp__ui pswp__ui--hidden">

                <div class="pswp__top-bar">

                    <div class="pswp__counter"></div>

                    <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                    <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                    <div class="pswp__preloader">
                        <div class="pswp__preloader__icn">
                            <div class="pswp__preloader__cut">
                                <div class="pswp__preloader__donut"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>

                <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>

                <div class="pswp__caption">
                    <div class="pswp__caption__center"></div>
                </div>

            </div>

        </div>

    </div>

   

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="~/Scripts/config.js"></script>
    <script src="~/Scripts/concat.min.js"></script>

    <script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function () { try { w.yaCounter48111842 = new Ya.Metrika2({ id: 48111842, clickmap: true, trackLinks: true, accurateTrackBounce: true, webvisor: true }); } catch (e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/tag.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks2");</script> <noscript><div><img src="https://mc.yandex.ru/watch/48111842" style="position:absolute; left:-9999px;" alt="" /></div></noscript>


</body>
</html>
